<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Axolotl</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@400;700&family=Inter:wght@400;500;600;700&family=Lato:wght@400;700&family=Merriweather:wght@300;400;700&family=Montserrat:wght@400;500;600&family=Nunito:wght@400;600;700&family=Open+Sans:wght@400;600&family=Playfair+Display:wght@400;600&family=Poppins:wght@400;500;600&family=Quicksand:wght@400;500;600&family=Raleway:wght@400;500;600&family=Roboto:wght@400;500;700&family=Source+Code+Pro:wght@400;600&family=Ubuntu:wght@400;500;700&family=Work+Sans:wght@400;500;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <!-- FullCalendar CSS -->
    <!-- FullCalendar CSS (Styles injected by v6 JS) -->
</head>

<body>
    <div class="sidebar">
        <div class="logo">
            <img src="{{ url_for('static', filename='axolotl_logo.png') }}" alt="Axolotl Logo" class="logo-img">
            <div class="logo-text">Axolotl</div>
            <div class="slogan">Built to Regenerate</div>
        </div>
        <nav>
            <a href="/" class="nav-link {% if request.path == '/' %}active{% endif %}">
                <span>üè†</span> Dashboard
            </a>
            <a href="/knowledge" class="nav-link {% if request.path == '/knowledge' %}active{% endif %}">
                <span>üß†</span> Knowledge Base
            </a>
            <a href="/calendar" class="nav-link {% if request.path == '/calendar' %}active{% endif %}">
                <span>üìÖ</span> Calendar
            </a>
            <a href="/secure" class="nav-link {% if request.path == '/secure' %}active{% endif %}">
                <span>üîí</span> Secure
            </a>
            <a href="/small-apps"
                class="nav-link {% if request.path == '/small-apps' or request.path.startswith('/small-apps/') %}active{% endif %}">
                <span>üöÄ</span> Small Apps
            </a>
            <a href="/all" class="nav-link {% if request.path == '/all' %}active{% endif %}">
                <span>üìù</span> Data Base
            </a>
            <a href="/settings" class="nav-link {% if request.path == '/settings' %}active{% endif %}">
                <span>‚öôÔ∏è</span> Settings
            </a>
        </nav>

    </div>

    <div class="main-content">
        {% block content %}{% endblock %}
    </div>

    <!-- Modals for Creation -->
    <div id="createModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2 id="modalTitle">Create New Item</h2>

            <form id="reminderForm" style="display:none; margin-top: 20px;">
                <div class="input-group">
                    <input type="text" id="remTitle" placeholder="Reminder Title" required>
                </div>
                <div class="input-group">
                    <textarea id="remDesc" placeholder="Description"></textarea>
                </div>
                <div class="input-group">
                    <input type="date" id="remDate" required>
                </div>
                <div class="input-group">
                    <select id="remRecur">
                        <option value="None">No Recurrence</option>
                        <option value="Daily">Daily</option>
                        <option value="Weekly">Weekly</option>
                        <option value="Monthly">Monthly</option>
                        <option value="Yearly">Yearly</option>
                    </select>
                </div>
                <button type="submit" class="btn">Create Reminder</button>
            </form>

            <form id="taskForm" style="display:none; margin-top: 20px;">
                <div class="input-group">
                    <input type="text" id="taskTitle" placeholder="Task Title" required>
                </div>
                <div class="input-group">
                    <textarea id="taskDesc" placeholder="Description"></textarea>
                </div>
                <div class="input-group">
                    <select id="taskStatus">
                        <option value="Yet to Start">Yet to Start</option>
                        <option value="Pending">Pending</option>
                        <option value="wip">In Progress</option>
                        <option value="Onhold">On Hold</option>
                        <option value="Completed">Completed</option>
                    </select>
                </div>
                <button type="submit" class="btn">Create Task</button>
            </form>
        </div>
    </div>

    <!-- Modal for Editing -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeEditModal()">&times;</span>
            <h2 id="editModalTitle">Edit Item</h2>

            <form id="editReminderForm" style="display:none; margin-top: 20px;">
                <input type="hidden" id="editRemId">
                <div class="input-group">
                    <input type="text" id="editRemTitle" placeholder="Reminder Title" required>
                </div>
                <div class="input-group">
                    <textarea id="editRemDesc" placeholder="Description"></textarea>
                </div>
                <div class="input-group">
                    <input type="date" id="editRemDate" required>
                </div>
                <div class="input-group">
                    <select id="editRemRecur">
                        <option value="None">No Recurrence</option>
                        <option value="Daily">Daily</option>
                        <option value="Weekly">Weekly</option>
                        <option value="Monthly">Monthly</option>
                        <option value="Yearly">Yearly</option>
                    </select>
                </div>
                <button type="submit" class="btn">Update Reminder</button>
            </form>

            <form id="editTaskForm" style="display:none; margin-top: 20px;">
                <input type="hidden" id="editTaskId">
                <div class="input-group">
                    <input type="text" id="editTaskTitle" placeholder="Task Title" required>
                </div>
                <div class="input-group">
                    <textarea id="editTaskDesc" placeholder="Description"></textarea>
                </div>
                <div class="input-group">
                    <select id="editTaskStatus">
                        <option value="Yet to Start">Yet to Start</option>
                        <option value="Pending">Pending</option>
                        <option value="wip">In Progress</option>
                        <option value="Onhold">On Hold</option>
                        <option value="Completed">Completed</option>
                    </select>
                </div>
                <button type="submit" class="btn">Update Task</button>
            </form>
        </div>
    </div>

    <!-- Modal for Comments -->
    <div id="commentsModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeCommentsModal()">&times;</span>
            <h2 id="commentsModalTitle">Task Comments</h2>
            <div id="commentsList" class="comments-list">
                <!-- Comments will be injected here -->
            </div>
            <div style="margin-top: 1.5rem;">
                <div class="input-group">
                    <input type="text" id="newCommentInput" placeholder="Add a comment...">
                </div>
                <button class="btn" id="submitCommentBtn">Post Comment</button>
            </div>
        </div>
    </div>

    <!-- Modal for KB Creation/Edit -->
    <div id="kbModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeKBModal()">&times;</span>
            <h2 id="kbModalTitle">New Knowledge Base</h2>
            <form id="kbForm" style="margin-top: 20px;">
                <input type="hidden" id="kbId">
                <div class="input-group">
                    <input type="text" id="kbTitle" placeholder="Title" required>
                </div>
                <div class="input-group">
                    <textarea id="kbData" placeholder="Data Content" rows="5" required></textarea>
                </div>
                <div class="input-group">
                    <input type="url" id="kbUrl" placeholder="URL (optional)">
                </div>
                <button type="submit" class="btn">Save Knowledge Base</button>
            </form>
        </div>
    </div>

    <!-- Modal for Project Creation/Edit -->
    <div id="projectModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeProjectModal()">&times;</span>
            <h2 id="projectModalTitle">New Project</h2>
            <form id="projectForm" style="margin-top: 20px;">
                <input type="hidden" id="projectId">
                <div class="input-group">
                    <input type="text" id="projectName" placeholder="Project Name" required>
                </div>
                <div class="input-group">
                    <textarea id="projectDescription" placeholder="Description" rows="3"></textarea>
                </div>
                <div class="input-group">
                    <label style="display: block; margin-bottom: 5px; font-weight: 600;">Start Date</label>
                    <input type="date" id="projectStartDate" required>
                </div>
                <div class="input-group">
                    <label style="display: block; margin-bottom: 5px; font-weight: 600;">End Date</label>
                    <input type="date" id="projectEndDate" required>
                </div>
                <div class="input-group">
                    <label style="display: block; margin-bottom: 5px; font-weight: 600;">Status</label>
                    <select id="projectStatus" required>
                        <option value="Yet to Start">Yet to Start</option>
                        <option value="Work In progress">Work In progress</option>
                        <option value="On-Hold">On-Hold</option>
                        <option value="Completed">Completed</option>
                        <option value="Delayed">Delayed</option>
                    </select>
                </div>
                <button type="submit" class="btn">Save Project</button>
            </form>
        </div>
    </div>

    <!-- Modal for Project Task Creation/Edit -->
    <div id="projectTaskModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeProjectTaskModal()">&times;</span>
            <h2 id="projectTaskModalTitle">New Task</h2>
            <form id="projectTaskForm" style="margin-top: 20px;">
                <input type="hidden" id="projectTaskProjectId">
                <input type="hidden" id="projectTaskTaskId">
                <input type="hidden" id="projectTaskParentId">
                <div class="input-group">
                    <input type="text" id="projectTaskName" placeholder="Task Name" required>
                </div>
                <div class="input-group">
                    <textarea id="projectTaskComments" placeholder="Comments" rows="3"></textarea>
                </div>
                <div class="input-group">
                    <label style="display: block; margin-bottom: 5px; font-weight: 600;">Start Date</label>
                    <input type="date" id="projectTaskStartDate" required>
                </div>
                <div class="input-group">
                    <label style="display: block; margin-bottom: 5px; font-weight: 600;">End Date</label>
                    <input type="date" id="projectTaskEndDate" required>
                </div>
                <div class="input-group" id="projectTaskStatusGroup" style="display: none;">
                    <label style="display: block; margin-bottom: 5px; font-weight: 600;">Status</label>
                    <select id="projectTaskStatus">
                        <option value="Yet to Start">Yet to Start</option>
                        <option value="Pending">Pending</option>
                        <option value="wip">In Progress</option>
                        <option value="Onhold">On Hold</option>
                        <option value="Completed">Completed</option>
                    </select>
                </div>
                <button type="submit" class="btn">Save Task</button>
            </form>
        </div>
    </div>

    <!-- Modal for Project Task Comments -->
    <div id="projectTaskCommentsModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeProjectTaskCommentsModal()">&times;</span>
            <h2 id="projectTaskCommentsModalTitle">Task Comments</h2>
            <div id="projectTaskCommentsList" class="comments-list">
                <!-- Comments will be injected here -->
            </div>
            <div style="margin-top: 1.5rem;">
                <div class="input-group">
                    <input type="text" id="newProjectTaskCommentInput" placeholder="Add a comment...">
                </div>
                <button class="btn" id="submitProjectTaskCommentBtn">Post Comment</button>
            </div>
        </div>
    </div>

    <!-- FullCalendar JS (v6 includes CSS) -->
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
    {% block scripts %}{% endblock %}

    <footer class="app-footer">
        <p>&copy; 2024 Appu Corporation‚Ñ¢. All rights reserved.</p>
    </footer>
</body>

</html>