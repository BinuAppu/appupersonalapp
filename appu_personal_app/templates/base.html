<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Appu's Personal App</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <!-- FullCalendar CSS -->
    <!-- FullCalendar CSS (Styles injected by v6 JS) -->
</head>

<body>
    <div class="sidebar">
        <div class="logo">
            <span>üü£</span> Appu's Personal App
        </div>
        <nav>
            <a href="/" class="nav-link {% if request.path == '/' %}active{% endif %}">
                <span>üè†</span> Dashboard
            </a>
            <a href="/knowledge" class="nav-link {% if request.path == '/knowledge' %}active{% endif %}">
                <span>üß†</span> Knowledge Base
            </a>
            <a href="/calendar" class="nav-link {% if request.path == '/calendar' %}active{% endif %}">
                <span>üìÖ</span> Calendar
            </a>
            <a href="/secure" class="nav-link {% if request.path == '/secure' %}active{% endif %}">
                <span>üîí</span> Secure
            </a>
            <a href="/all" class="nav-link {% if request.path == '/all' %}active{% endif %}">
                <span>üìù</span> Data Base
            </a>
        </nav>

        <div class="theme-toggle">
            <p>Appearance</p>
            <div class="toggle-group">
                <label>
                    <input type="radio" name="theme" id="lightTheme" value="light" onchange="setTheme('light')">
                    <span>‚òÄÔ∏è Light</span>
                </label>
                <label>
                    <input type="radio" name="theme" id="darkTheme" value="dark" onchange="setTheme('dark')">
                    <span>üåô Dark</span>
                </label>
            </div>
        </div>
    </div>

    <div class="main-content">
        {% block content %}{% endblock %}
    </div>

    <!-- Modals for Creation -->
    <div id="createModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2 id="modalTitle">Create New Item</h2>

            <form id="reminderForm" style="display:none; margin-top: 20px;">
                <div class="input-group">
                    <input type="text" id="remTitle" placeholder="Reminder Title" required>
                </div>
                <div class="input-group">
                    <textarea id="remDesc" placeholder="Description"></textarea>
                </div>
                <div class="input-group">
                    <input type="date" id="remDate" required>
                </div>
                <div class="input-group">
                    <select id="remRecur">
                        <option value="None">No Recurrence</option>
                        <option value="Daily">Daily</option>
                        <option value="Weekly">Weekly</option>
                        <option value="Monthly">Monthly</option>
                        <option value="Yearly">Yearly</option>
                    </select>
                </div>
                <button type="submit" class="btn">Create Reminder</button>
            </form>

            <form id="taskForm" style="display:none; margin-top: 20px;">
                <div class="input-group">
                    <input type="text" id="taskTitle" placeholder="Task Title" required>
                </div>
                <div class="input-group">
                    <textarea id="taskDesc" placeholder="Description"></textarea>
                </div>
                <div class="input-group">
                    <select id="taskStatus">
                        <option value="Yet to Start">Yet to Start</option>
                        <option value="Pending">Pending</option>
                        <option value="wip">In Progress</option>
                        <option value="Onhold">On Hold</option>
                        <option value="Completed">Completed</option>
                    </select>
                </div>
                <button type="submit" class="btn">Create Task</button>
            </form>
        </div>
    </div>

    <!-- Modal for Editing -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeEditModal()">&times;</span>
            <h2 id="editModalTitle">Edit Item</h2>

            <form id="editReminderForm" style="display:none; margin-top: 20px;">
                <input type="hidden" id="editRemId">
                <div class="input-group">
                    <input type="text" id="editRemTitle" placeholder="Reminder Title" required>
                </div>
                <div class="input-group">
                    <textarea id="editRemDesc" placeholder="Description"></textarea>
                </div>
                <div class="input-group">
                    <input type="date" id="editRemDate" required>
                </div>
                <div class="input-group">
                    <select id="editRemRecur">
                        <option value="None">No Recurrence</option>
                        <option value="Daily">Daily</option>
                        <option value="Weekly">Weekly</option>
                        <option value="Monthly">Monthly</option>
                        <option value="Yearly">Yearly</option>
                    </select>
                </div>
                <button type="submit" class="btn">Update Reminder</button>
            </form>

            <form id="editTaskForm" style="display:none; margin-top: 20px;">
                <input type="hidden" id="editTaskId">
                <div class="input-group">
                    <input type="text" id="editTaskTitle" placeholder="Task Title" required>
                </div>
                <div class="input-group">
                    <textarea id="editTaskDesc" placeholder="Description"></textarea>
                </div>
                <div class="input-group">
                    <select id="editTaskStatus">
                        <option value="Yet to Start">Yet to Start</option>
                        <option value="Pending">Pending</option>
                        <option value="wip">In Progress</option>
                        <option value="Onhold">On Hold</option>
                        <option value="Completed">Completed</option>
                    </select>
                </div>
                <button type="submit" class="btn">Update Task</button>
            </form>
        </div>
    </div>

    <!-- Modal for Comments -->
    <div id="commentsModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeCommentsModal()">&times;</span>
            <h2 id="commentsModalTitle">Task Comments</h2>
            <div id="commentsList" class="comments-list">
                <!-- Comments will be injected here -->
            </div>
            <div style="margin-top: 1.5rem;">
                <div class="input-group">
                    <input type="text" id="newCommentInput" placeholder="Add a comment...">
                </div>
                <button class="btn" id="submitCommentBtn">Post Comment</button>
            </div>
        </div>
    </div>

    <!-- Modal for KB Creation/Edit -->
    <div id="kbModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeKBModal()">&times;</span>
            <h2 id="kbModalTitle">New Knowledge Base</h2>
            <form id="kbForm" style="margin-top: 20px;">
                <input type="hidden" id="kbId">
                <div class="input-group">
                    <input type="text" id="kbTitle" placeholder="Title" required>
                </div>
                <div class="input-group">
                    <textarea id="kbData" placeholder="Data Content" rows="5" required></textarea>
                </div>
                <div class="input-group">
                    <input type="url" id="kbUrl" placeholder="URL (optional)">
                </div>
                <button type="submit" class="btn">Save Knowledge Base</button>
            </form>
        </div>
    </div>

    <!-- FullCalendar JS (v6 includes CSS) -->
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
    {% block scripts %}{% endblock %}
</body>

</html>